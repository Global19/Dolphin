<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="com.dianping.paas.core.entity.ImageEntity">
    <typeAlias alias="ImageEntity" type="com.dianping.paas.core.entity.ImageEntity"/>

    <insert id="insert" parameterClass="ImageEntity">
        INSERT INTO image(
        id,
        image_type,
        dockerfile_template,
        creation_date,
        last_modified_date
        )VALUES(
        #id#,
        #image_type#,
        #dockerfile_template#,
        now(),
        #last_modified_date#
        );
        <selectKey resultClass="java.lang.Long" keyProperty="id">
            SELECT LAST_INSERT_ID()
        </selectKey>
    </insert>

    <delete id="delete" parameterClass="java.lang.Long">
        DELETE FROM image WHERE id = #id#;
    </delete>

    <select id="selectAll" resultClass="ImageEntity">
        SELECT * FROM image;
    </select>

    <select id="selectOne" resultClass="ImageEntity">
        SELECT * FROM image WHERE id = #id#;
    </select>

    <update id="update" parameterClass="ImageEntity">
        UPDATE image SET
        image_type = #image_type#,
        dockerfile_template = #dockerfile_template#
        WHERE id = #id#
    </update>

    <select id="getByImageType" resultClass="ImageEntity">
        SELECT * FROM image WHERE image_type = #image_type#;
    </select>


</sqlMap>